# Snapshot report for `test/dist.test.js`

The actual snapshot is saved in `dist.test.js.snap`.

Generated by [AVA](https://ava.li).

## 
    dist converts an export default literal declaration to a module.exports
    assignment
  

> Snapshot 1

    {
      cjs: [
        '/fakePath/exportDefaultLiteral.js',
        `'use strict';␊
        ␊
        var exportDefaultLiteral = 'Hello World';␊
        ␊
        module.exports = exportDefaultLiteral;␊
        `,
      ],
    }

## dist bundles imports with module into dist files

> Snapshot 1

    {
      cjs: [
        '/fakePath/exportDefaultFunctionWithImports.js',
        `'use strict';␊
        ␊
        const preserveCamelCase = input => {␊
        	let isLastCharLower = false;␊
        	let isLastCharUpper = false;␊
        	let isLastLastCharUpper = false;␊
        ␊
        	for (let i = 0; i < input.length; i++) {␊
        		const c = input[i];␊
        ␊
        		if (isLastCharLower && /[a-zA-Z]/.test(c) && c.toUpperCase() === c) {␊
        			input = input.slice(0, i) + '-' + input.slice(i);␊
        			isLastCharLower = false;␊
        			isLastLastCharUpper = isLastCharUpper;␊
        			isLastCharUpper = true;␊
        			i++;␊
        		} else if (isLastCharUpper && isLastLastCharUpper && /[a-zA-Z]/.test(c) && c.toLowerCase() === c) {␊
        			input = input.slice(0, i - 1) + '-' + input.slice(i - 1);␊
        			isLastLastCharUpper = isLastCharUpper;␊
        			isLastCharUpper = false;␊
        			isLastCharLower = true;␊
        		} else {␊
        			isLastCharLower = c.toLowerCase() === c;␊
        			isLastLastCharUpper = isLastCharUpper;␊
        			isLastCharUpper = c.toUpperCase() === c;␊
        		}␊
        	}␊
        ␊
        	return input;␊
        };␊
        ␊
        var camelcase = (input, options) => {␊
        	options = Object.assign({␊
        		pascalCase: false␊
        	}, options);␊
        ␊
        	const postProcess = x => options.pascalCase ? x.charAt(0).toUpperCase() + x.slice(1) : x;␊
        ␊
        	if (Array.isArray(input)) {␊
        		input = input.map(x => x.trim())␊
        			.filter(x => x.length)␊
        			.join('-');␊
        	} else {␊
        		input = input.trim();␊
        	}␊
        ␊
        	if (input.length === 0) {␊
        		return '';␊
        	}␊
        ␊
        	if (input.length === 1) {␊
        		return options.pascalCase ? input.toUpperCase() : input.toLowerCase();␊
        	}␊
        ␊
        	if (/^[a-z\\d]+$/.test(input)) {␊
        		return postProcess(input);␊
        	}␊
        ␊
        	const hasUpperCase = input !== input.toLowerCase();␊
        ␊
        	if (hasUpperCase) {␊
        		input = preserveCamelCase(input);␊
        	}␊
        ␊
        	input = input␊
        		.replace(/^[_.\\- ]+/, '')␊
        		.toLowerCase()␊
        		.replace(/[_.\\- ]+(\\w|$)/g, (m, p1) => p1.toUpperCase());␊
        ␊
        	return postProcess(input);␊
        };␊
        ␊
        function npmShortName (name = '') {␊
          const parts = name.split('/');␊
          return parts.length ? camelcase(parts[parts.length - 1]) : ''␊
        }␊
        ␊
        var message = 'Hello World';␊
        ␊
        function greeting () {␊
          return npmShortName(message)␊
        }␊
        ␊
        module.exports = greeting;␊
        `,
      ],
      esm: [
        '/fakePath/exportDefaultFunctionWithImports.m.js',
        `const preserveCamelCase = input => {␊
        	let isLastCharLower = false;␊
        	let isLastCharUpper = false;␊
        	let isLastLastCharUpper = false;␊
        ␊
        	for (let i = 0; i < input.length; i++) {␊
        		const c = input[i];␊
        ␊
        		if (isLastCharLower && /[a-zA-Z]/.test(c) && c.toUpperCase() === c) {␊
        			input = input.slice(0, i) + '-' + input.slice(i);␊
        			isLastCharLower = false;␊
        			isLastLastCharUpper = isLastCharUpper;␊
        			isLastCharUpper = true;␊
        			i++;␊
        		} else if (isLastCharUpper && isLastLastCharUpper && /[a-zA-Z]/.test(c) && c.toLowerCase() === c) {␊
        			input = input.slice(0, i - 1) + '-' + input.slice(i - 1);␊
        			isLastLastCharUpper = isLastCharUpper;␊
        			isLastCharUpper = false;␊
        			isLastCharLower = true;␊
        		} else {␊
        			isLastCharLower = c.toLowerCase() === c;␊
        			isLastLastCharUpper = isLastCharUpper;␊
        			isLastCharUpper = c.toUpperCase() === c;␊
        		}␊
        	}␊
        ␊
        	return input;␊
        };␊
        ␊
        var camelcase = (input, options) => {␊
        	options = Object.assign({␊
        		pascalCase: false␊
        	}, options);␊
        ␊
        	const postProcess = x => options.pascalCase ? x.charAt(0).toUpperCase() + x.slice(1) : x;␊
        ␊
        	if (Array.isArray(input)) {␊
        		input = input.map(x => x.trim())␊
        			.filter(x => x.length)␊
        			.join('-');␊
        	} else {␊
        		input = input.trim();␊
        	}␊
        ␊
        	if (input.length === 0) {␊
        		return '';␊
        	}␊
        ␊
        	if (input.length === 1) {␊
        		return options.pascalCase ? input.toUpperCase() : input.toLowerCase();␊
        	}␊
        ␊
        	if (/^[a-z\\d]+$/.test(input)) {␊
        		return postProcess(input);␊
        	}␊
        ␊
        	const hasUpperCase = input !== input.toLowerCase();␊
        ␊
        	if (hasUpperCase) {␊
        		input = preserveCamelCase(input);␊
        	}␊
        ␊
        	input = input␊
        		.replace(/^[_.\\- ]+/, '')␊
        		.toLowerCase()␊
        		.replace(/[_.\\- ]+(\\w|$)/g, (m, p1) => p1.toUpperCase());␊
        ␊
        	return postProcess(input);␊
        };␊
        ␊
        function npmShortName (name = '') {␊
          const parts = name.split('/');␊
          return parts.length ? camelcase(parts[parts.length - 1]) : ''␊
        }␊
        ␊
        var message = 'Hello World';␊
        ␊
        function greeting () {␊
          return npmShortName(message)␊
        }␊
        ␊
        export default greeting;␊
        `,
      ],
    }

## dist bundles specified imports with module into dist files

> Snapshot 1

    {
      cjs: [
        '/fakePath/exportObjectWithImports.js',
        `'use strict';␊
        ␊
        Object.defineProperty(exports, '__esModule', { value: true });␊
        ␊
        function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }␊
        ␊
        var npmShortName = _interopDefault(require('@ianwalter/npm-short-name'));␊
        ␊
        function promiseComplete (input) {␊
          const output = Array.isArray(input) ? [] : {};␊
          const inputLength = Array.isArray(input)␊
            ? input.length␊
            : Object.keys(input).length;␊
          return new Promise(resolve => {␊
            const addResult = key => value => {␊
              output[key] = value;␊
              const isFinished = Array.isArray(input)␊
                ? inputLength === output.length␊
                : inputLength === Object.keys(output).length;␊
              if (isFinished) {␊
                resolve(output);␊
              }␊
            };␊
            for (const [key, promise] of Object.entries(input)) {␊
              const handler = addResult(key);␊
              promise.then(handler, handler);␊
            }␊
          })␊
        }␊
        ␊
        function greeting () {␊
          return 'Hello World'␊
        }␊
        ␊
        exports.npmShortName = npmShortName;␊
        exports.greeting = greeting;␊
        exports.promiseComplete = promiseComplete;␊
        `,
      ],
    }

## dist converts an export default function declaration to a module.exports assignment

> Snapshot 1

    {
      cjs: [
        '/fakePath/some-function.js',
        `'use strict';␊
        ␊
        function greeting () {␊
          return 'Hello World'␊
        }␊
        ␊
        module.exports = greeting;␊
        `,
      ],
      iife: [
        '/fakePath/exportDefaultFunction.iife.js',
        `var exportDefaultFunction = (function () {␊
          'use strict';␊
        ␊
          function greeting () {␊
            return 'Hello World'␊
          }␊
        ␊
          return greeting;␊
        ␊
        }());␊
        `,
      ],
    }

## dist converts an export default new expresion declaration to a module.exports assignment

> Snapshot 1

    {
      cjs: [
        '/fakePath/exportDefaultNewExpression.js',
        `'use strict';␊
        ␊
        class SomeClass {}␊
        ␊
        var exportDefaultNewExpression = new SomeClass();␊
        ␊
        module.exports = exportDefaultNewExpression;␊
        `,
      ],
      iife: [
        '/fakePath/b.js',
        `var exportDefaultNewExpression = (function () {␊
        	'use strict';␊
        ␊
        	class SomeClass {}␊
        ␊
        	var exportDefaultNewExpression = new SomeClass();␊
        ␊
        	return exportDefaultNewExpression;␊
        ␊
        }());␊
        `,
      ],
    }
